sap.ui.define(["tcs/hr/hire/controller/BaseController","sap/m/MessageBox","sap/m/MessageToast","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/model/json/JSONModel","sap/ui/core/Fragment"],function(e,t,o,i,n,s,r){"use strict";return e.extend("tcs.hr.hire.controller.View1",{onInit:function(){this.oRouter=this.getOwnerComponent().getRouter();var e={singleRecord:{}};this.localModel=new s;this.localModel.setData(e);this.getView().setModel(this.localModel,"localModel")},onDelete2:function(e){var t=e.getSource();var o=e.getParameter("listItem");t.removeItem(o)},onDelete:function(){var e=this.getView().byId("idList");var t=e.getSelectedItems();for(let o=0;o<t.length;o++){const i=t[o];e.removeItem(i)}},detailPopup:null,showPopup:function(){if(!this.detailPopup){r.load({id:"prodDetails",name:"tcs.hr.hire.fragments.showDetails",controller:this}).then(function(e){this.detailPopup=e;this.detailPopup.bindElement("/singleRecord");this.detailPopup.setTitle("Product Details");this.detailPopup.setModel(this.getView().getModel("localModel"));this.getView().addDependent(this.detailPopup);this.detailPopup.open()}.bind(this))}else{this.detailPopup.open()}},onAdd:function(){this.oRouter.navTo("add")},onClose:function(e){this.detailPopup.close()},onSearch:function(e){var o=e.getParameter("query");if(o.indexOf("-")!=-1){var s=this.getView().getModel();var r=this;s.read("/ProductSet('"+o+"')",{success:function(e){console.log(e);r.localModel.setProperty("/singleRecord",e);r.showPopup()},error:function(e){t.error(JSON.parse(e.responseText).error.innererror.errordetails[0].message)}})}else{var l=new n("CATEGORY",i.Contains,o);this.getView().byId("idList").getBinding("items").filter(l)}},onItemSelection:function(e){var t=e.getParameter("listItem");var o=t.getBindingContext().getPath();console.log(o);console.log(this.getView().getModel().getProperty(o));var i=o.split("/")[o.split("/").length-1];this.onNext(i)},getStatus:function(e){var t=this.getView().getModel().getProperty("/status");for(let o=0;o<t.length;o++){const i=t[o];if(i.key===e){return i.value}}},onNext:function(e){this.oRouter.navTo("detail",{contra:e})},onOrder:function(){t.confirm("Do you want to proceed?",{onClose:this.onConfirmation.bind(this)})},onConfirmation:function(e){if(e==="OK"){this.getView().setBusy(true);var i=this;setTimeout(function(){o.show("your order has been placed successfully");i.getView().setBusy(false)},5e3)}else{t.error("Dude! you cancelled it!")}}})});